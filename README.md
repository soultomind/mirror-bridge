# Mirror-Bridge

프로젝트 개요
- 양방향 미러링 앱
- 목적: 다양한 프로세스/디바이스 환경에서 WebView2 인스턴스들 간의 신뢰성 있는 양방향 미러링(입력·상태·렌더링 정보 등)을 제공.

최종 목표 (요약)
- SharedWorker 기반
  - 같은 프로세스 내 WebView2 브라우저 컨트롤 간 양방향 미러링
  - 서로 다른 프로세스(동일 호스트)에서 실행되는 WebView2 컨트롤 간 양방향 미러링
- Node.js + Socket.IO 기반
  - 서로 다른 프로세스(네트워크) 간 양방향 미러링
  - 서로 다른 디바이스: 한쪽이 웹페이지(브라우저), 다른 쪽이 C# WebView2 브라우저 컨트롤인 경우의 미러링

아키텍처 개요
- 로컬(SharedWorker) 경로
  - 브라우저 엔진(WebView2) 내부에서 SharedWorker를 통해 메시지 허브를 구성.
  - 동일 프로세스: 동일 프로세스 내 WebView2 인스턴스들 간에 포인트-투-포인트 미러링을 수행.
  - 서로 다른 프로세스(동일 호스트): 네이티브 호스트 브릿지(앱 레벨 IPC) 또는 브라우저 인스턴스가 같은 SharedWorker 자원에 접근하도록 구성하여 메시지 전달.
- 네트워크(Socket.IO) 경로
  - Node.js Socket.IO 서버를 중앙 메시지 브로커로 사용.
  - 서로 다른 프로세스/디바이스 간에 안정적인 소켓 연결을 통해 이벤트/상태 동기화 및 입력 복제 수행.

주요 구성 요소
- Web (프런트엔드)
  - SharedWorker 스크립트: 로컬 메시지 라우팅 및 세션 관리
  - Socket.IO 클라이언트: 네트워크 미러링 및 리레이 기능
- 네이티브 C# 앱 (.NET 8, WebView2)
  - WebView2 컨트롤 호스트: 페이지 로드, 메시지 핸들링(HostObject, postMessage 등)
  - 로컬 IPC 브리지 (프로세스 간 통신 필요 시)
- Node.js 서버 (옵션)
  - Socket.IO 서버: 방/세션/인증 관리, 메시지 브로드캐스트/라우팅

사용 시나리오 (예)
- 동일 프로세스: 데스크탑 앱 내 Main/Sub WebView2가 동일 SharedWorker로 실시간 상태 동기화.
- 동일 호스트 서로 다른 프로세스: 각 프로세스가 SharedWorker 접근 또는 로컬 IPC 브리지를 통해 동기화.
- 네트워크/다중 디바이스: 모바일/웹 브라우저 ↔ 데스크탑(WebView2) 간 Socket.IO로 입력/화면 상태 동기화.

개발 및 테스트 지침 (간단)
- 개발 환경: Visual Studio 2022, .NET 8
- WebView2 로컬 메시징 디버깅: 콘솔 로그와 네트워크 탭, SharedWorker 스코프 확인
- Socket.IO 테스트: 로컬 Node.js 서버를 띄워 다중 클라이언트 연결 후 동기화 확인

확장 포인트
- 인증·암호화: 네트워크 경로에 TLS 및 인증 토큰 적용
- 지연 보정: 입력 지연 보정 및 재동기화 로직 추가
- 상태 최소화: 전송량 절감(델타 전송, 압축)

변경 기록
- README 구조를 목표·아키텍처·구성요소·사용 시나리오·개발 지침·확장 포인트로 명확히 재구성하여 최종 목표를 분명히 설명함.